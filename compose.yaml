name: chatacter
services:
  App:
    image: ghcr.io/alphaspheredotai/chattr:latest
    ports:
      - 8000:8000
    container_name: app
    networks:
      - app_network
    volumes:
      - ./App:/app:rw
    restart: always
    depends_on:
      - Ollama
      - VideoGenerator
      - VoiceGenerator
      - SearchEngine
      - VectorDatabase
    environment:
      GROQ_API_KEY: ${GROQ_API_KEY}
  VideoGenerator:
    image: ghcr.io/alphaspheredotai/visualizr:latest
    container_name: video_generator
    volumes:
      - ./VideoGenerator:/app:rw
    restart: always
    ports:
      - 8002:8002
    networks:
      - app_network
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities:
                - gpu
  VoiceGenerator:
    image: ghcr.io/alphaspheredotai/vocalizr:latest@sha256:82081ac76aabd5d49f9dc6d46ca5718857a420311daf820fcaf1b59f798c8e7c
    container_name: voice_generator
    volumes:
      - ./VoiceGenerator:/app:rw
    restart: always
    ports:
      - 8001:8001
    networks:
      - app_network
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities:
                - gpu
  VectorDatabase:
    image: qdrant/qdrant:v1.14.0@sha256:f21bbaf111837592b70f4d727c62cf6d6525b5374b1193e9faeac26a953702a8
    ports:
      - 6333:8000
    volumes:
      - ./VectorDatabase:/qdrant/storage:rw
    networks:
      - app_network
    container_name: vector_database
    restart: always
networks:
  app_network:
