name: Chatacter
services:
  App:
    image: ghcr.io/alphaspheredotai/chattr:latest@sha256:0a3d0854eafcc6c937f5a59c7b33edd177892c68cf3d5a8e7403c3fbe8a3519a
    container_name: app
    depends_on:
      - VectorDatabase
      - VideoGenerator
      - VoiceGenerator
    volumes:
      - ./App:/app:rw
    environment:
      GROQ_API_KEY: ${GROQ_API_KEY}
    ports:
      - '8000:7860'
    restart: always
  VectorDatabase:
    image: qdrant/qdrant:latest@sha256:419d72603f5346ee22ffc4606bdb7beb52fcb63077766fab678e6622ba247366
    container_name: vector_database
    volumes:
      - qdrant_storage:/qdrant/storage
    ports:
      - '6333:6333'
      - '6334:6334'
    restart: always
  VideoGenerator:
    image: ghcr.io/alphaspheredotai/visualizr:latest
    container_name: video_generator
    volumes:
      - ./VideoGenerator:/app:rw
    ports:
      - '8002:7860'
    restart: always
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities:
                - gpu
  VoiceGenerator:
    image: ghcr.io/alphaspheredotai/vocalizr:latest@sha256:1ede121ba19a00b1ee74a736aa075657645eb21e0412557e6d0c03ab2c47cbca
    container_name: voice_generator
    volumes:
      - ./VoiceGenerator:/app:rw
    ports:
      - '8001:7860'
    restart: always
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities:
                - gpu
